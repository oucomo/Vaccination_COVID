---
title: "Data Cleaning"
date: " 2020-01-26 (update: `r Sys.Date()`)"
output:
    html_document:
      theme: cerulean
      toc: yes
      toc_float: yes
editor_options:
  chunk_output_type: console
---

## Import and merge data

```{r}
#source(file.path("code", "01_import_merge.R"))
```

## Load data

```{r}
library(data.table)
library(lubridate)
library(tidyverse)

data_path <- file.path("..", "tuann349_vad")
dat <- readRDS(file = file.path("..", "tuann349_vad", "alldat.rds"))
```


## Check data

### Data duplication

### Dates mismatch
```{r}
dat$ddif <- (dat$NGAY_TIEM - dat$NGAY_SINH)/ddays(1)

tmp <- dat[ddif < 0]
id <- unique(tmp$MA_DOI_TUONG)

tmp2 <- dat[MA_DOI_TUONG %in% id]
tmp3 <- tmp2[order(TENTINH, MA_DOI_TUONG)]
barplot(table(tmp3$NGAY_TIEM))
```

